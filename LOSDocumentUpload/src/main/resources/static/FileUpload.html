<html>
<head>
  <script src="/js/jquery-1.11.2.min.js"></script>
  <style>
  div.DialogMask
	{
    	padding: 10px;
    	position: fixed;
    	top: 0;
    	right: 0;
    	bottom: 0;
    	left: 0;
    	z-index: 50;
    	background-color: #606060;
    	filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=50);
    	-moz-opacity: .5;
    	opacity: .5;
	}
	</style>
</head>

<body>
	<div id="DialogMask" ></div> 
	<h1>Document Upload for Loan ID : <span id="loanId"></span></h1>
	<form id="upload-file-form">
		<input id="clientId" type="text" value="CLNT00022123" />
		<p>Select a Document : 
		<input id="upload-file-input" type="file" name="file" accept="*" />
		<input id="upload-file-button" type="button" value="Upload" />
    	<span id="upload-file-message"></span>
	</form>
</body>


<!-- Javascript functions -->
<script>
    $(document).ready(function() {
      $("#upload-file-button").on("click", uploadFile);
      $("#DialogMask").show();
      setTimeout(function(){ getCustomerId(); }, 100000);
    });
    
    function getCustomerId() {
    	var path = window.location.pathname;
    	var customerId = "";
    	var lastIndex = path.substring(path.lastIndexOf("/"), path.length);
    	//alert(lastIndex);
    	$("#DialogMask").hide();
    }
    
    function uploadFile() {
      $.ajax({
        url: "/rest/file/upload",
        type: "POST",
        data: new FormData($("#upload-file-form")[0]),
        enctype: 'multipart/form-data',
        processData: false,
        contentType: false,
        cache: false,
        success: function () {
          // Handle upload success
          $("#upload-file-message").text("File succesfully uploaded");
        },
        error: function () {
          // Handle upload error
          $("#upload-file-message").text(
              "File not uploaded (perhaps it's too much big)");
        }
      });
      
      
      
    } 
</script>
</html>